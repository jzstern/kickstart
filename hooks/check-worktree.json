{
	"name": "check-worktree",
	"description": "Block file writes when on main/master branch",
	"hooks": [
		{
			"event": "PreToolUse",
			"matcher": {
				"tool": ["Write", "Edit", "MultiEdit"]
			},
			"command": "branch=$(git branch --show-current 2>/dev/null); if [ \"$branch\" = \"main\" ] || [ \"$branch\" = \"master\" ]; then repo=$(basename \"$PWD\"); printf 'BLOCKED: Cannot write files on %s branch.\\n\\nCreate a worktree first:\\n\\n  git worktree add -b feat/your-feature ../%s-feat-your-feature %s\\n  cd ../%s-feat-your-feature\\n' \"$branch\" \"$repo\" \"$branch\" \"$repo\"; exit 1; fi"
		}
	]
}

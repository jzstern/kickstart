{
	"name": "check-worktree",
	"description": "Block file writes when on main/master branch",
	"hooks": [
		{
			"event": "PreToolUse",
			"matcher": {
				"tool": ["Write", "Edit", "MultiEdit"]
			},
			"command": "source \"${CLAUDE_PLUGIN_ROOT}/hooks/lib/branch-utils.sh\"; branch=$(get_branch); if is_main_branch \"$branch\"; then repo=$(get_repo); printf 'BLOCKED: Cannot write files on %s branch.\\n\\n%s\\n' \"$branch\" \"$(worktree_message \"$branch\" \"$repo\")\"; exit 1; fi"
		}
	]
}

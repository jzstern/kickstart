{
	"name": "session-start-warning",
	"description": "Warn when on main/master branch, check if behind remote, and auto-cleanup stale worktrees",
	"hooks": [
		{
			"event": "SessionStart",
			"command": "source \"${CLAUDE_PLUGIN_ROOT}/hooks/lib/branch-utils.sh\"; branch=$(get_branch); repo=$(get_repo); stale_count=$(count_stale_worktrees); if [ \"$stale_count\" -gt 0 ]; then printf '\\nüßπ Cleaning up %s stale worktree(s)...\\n' \"$stale_count\"; cleanup_stale_worktrees; printf '\\n'; fi; if is_main_branch \"$branch\"; then git fetch origin \"$branch\" --quiet 2>/dev/null; behind=$(git rev-list --count HEAD..origin/\"$branch\" 2>/dev/null || echo 0); if [ \"$behind\" -gt 0 ]; then printf '‚ö†Ô∏è  WARNING: You are on %s and %s commits behind origin!\\n\\nPull latest before creating a worktree:\\n\\n  git pull origin %s\\n  %s\\n\\n' \"$branch\" \"$behind\" \"$branch\" \"$(worktree_message \"$branch\" \"$repo\")\"; else printf '‚ö†Ô∏è  WARNING: You are on the %s branch!\\n\\n%s\\n\\n' \"$branch\" \"$(worktree_message \"$branch\" \"$repo\")\"; fi; fi"
		}
	]
}

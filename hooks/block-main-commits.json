{
	"name": "block-main-commits",
	"description": "Block git commit and push commands when on main/master branch",
	"hooks": [
		{
			"event": "PreToolUse",
			"matcher": {
				"tool": "Bash"
			},
			"command": "if echo \"$TOOL_INPUT_command\" | grep -qE 'git[[:space:]]+(commit|push)'; then source \"${CLAUDE_PLUGIN_ROOT}/hooks/lib/branch-utils.sh\"; branch=$(get_branch); if is_main_branch \"$branch\"; then repo=$(get_repo); printf 'BLOCKED: Cannot commit/push directly to %s.\\n\\n%s\\n' \"$branch\" \"$(worktree_message \"$branch\" \"$repo\")\"; exit 1; fi; fi"
		}
	]
}
